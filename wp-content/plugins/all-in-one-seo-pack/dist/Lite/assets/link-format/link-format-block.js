/*! For license information please see link-format-block.js.LICENSE.txt */
(()=>{var e={184:(e,t)=>{var n;!function(){"use strict";var i={}.hasOwnProperty;function r(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var o=typeof n;if("string"===o||"number"===o)e.push(n);else if(Array.isArray(n)&&n.length){var s=r.apply(null,n);s&&e.push(s)}else if("object"===o)for(var l in n)i.call(n,l)&&n[l]&&e.push(l)}}return e.join(" ")}e.exports?(r.default=r,e.exports=r):void 0===(n=function(){return r}.apply(t,[]))||(e.exports=n)}()}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var o=t[i]={exports:{}};return e[i](o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";const e=window.wp.i18n,t=window.wp.element,i=window.wp.components,r=window.wp.richText,o=window.wp.url,s=window.wp.blockEditor,l=window.wp.htmlEntities,a=window.wp.primitives,c=(0,t.createElement)(a.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,t.createElement)(a.Path,{d:"M15.6 7.3h-.7l1.6-3.5-.9-.4-3.9 8.5H9v1.5h2l-1.3 2.8H8.4c-2 0-3.7-1.7-3.7-3.7s1.7-3.7 3.7-3.7H10V7.3H8.4c-2.9 0-5.2 2.3-5.2 5.2 0 2.9 2.3 5.2 5.2 5.2H9l-1.4 3.2.9.4 5.7-12.5h1.4c2 0 3.7 1.7 3.7 3.7s-1.7 3.7-3.7 3.7H14v1.5h1.6c2.9 0 5.2-2.3 5.2-5.2 0-2.9-2.4-5.2-5.2-5.2z"})),u=(0,t.createElement)(a.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,t.createElement)(a.Path,{d:"M15.6 7.2H14v1.5h1.6c2 0 3.7 1.7 3.7 3.7s-1.7 3.7-3.7 3.7H14v1.5h1.6c2.8 0 5.2-2.3 5.2-5.2 0-2.9-2.3-5.2-5.2-5.2zM4.7 12.4c0-2 1.7-3.7 3.7-3.7H10V7.2H8.4c-2.9 0-5.2 2.3-5.2 5.2 0 2.9 2.3 5.2 5.2 5.2H10v-1.5H8.4c-2 0-3.7-1.7-3.7-3.7zm4.6.9h5.3v-1.5H9.3v1.5z"})),d=window.lodash,p=(e,t,n)=>{let i,r=0;const o={dev:-6,alpha:-5,a:-5,beta:-4,b:-4,RC:-3,rc:-3,"#":-2,p:1,pl:1},s=function(e){return(e=(e=(""+e).replace(/[_\-+]/g,".")).replace(/([^.\d]+)/g,".$1.").replace(/\.{2,}/g,".")).length?e.split("."):[-8]},l=function(e){return e?isNaN(e)?o[e]||-7:parseInt(e,10):0};e=s(e),t=s(t);const a=Math.max(e.length,t.length);for(i=0;i<a;i++)if(e[i]!==t[i]){if(e[i]=l(e[i]),t[i]=l(t[i]),e[i]<t[i]){r=-1;break}if(e[i]>t[i]){r=1;break}}if(!n)return r;switch(n){case">":case"gt":return 0<r;case">=":case"ge":return 0<=r;case"<=":case"le":return 0>=r;case"===":case"=":case"eq":return 0===r;case"<>":case"!==":case"ne":return 0!==r;case"":case"<":case"lt":return 0>r;default:return null}};var h=n(184),g=n.n(h);const m=window.wp.compose,k=window.wp.data,f=window.wp.dom,w=window.wp.hooks,v=window.ReactJSXRuntime,b=[{id:"opensInNewTab",title:(0,e.__)("Open in new tab"),type:"ToggleControl"},{id:"nofollow",title:(0,e.__)('Add "nofollow" to link',"all-in-one-seo-pack"),type:"ToggleControl"},{id:"sponsored",title:(0,e.__)('Add "sponsored" to link',"all-in-one-seo-pack"),type:"ToggleControl"},{id:"ugc",title:(0,e.__)('Add "ugc" to link',"all-in-one-seo-pack"),type:"ToggleControl"},{id:"title",title:(0,e.__)("Add title attribute to link","all-in-one-seo-pack"),type:"TextControl"}];class _ extends t.Component{constructor(e){super(e),this.state={textValue:e.value.title}}componentDidUpdate(e,t){t.textValue===this.state.textValue&&e.value.title===this.props.value.title&&e.value.title!==t.textValue&&this.setState({textValue:e.value.title})}componentWillUnmount(){this.state.textValue&&this.state.textValue!==this.props.value.title&&this.props.onChange({...this.props.value,title:this.state.textValue})}render(){const{value:t,onChange:n}=this.props,r=b;if(!r||!r.length)return null;const o=e=>i=>{n({...t,[e.id]:i})},s=(e,i)=>{t.url?n({...t,[i.id]:e.target.value}):this.setState({textValue:e.target.value})},l=r.map((e=>"TextControl"===e.type?(0,v.jsx)(i.TextControl,{"data-aioseop":"true",className:"block-editor-link-control__setting aioseo-link-title",label:e.title,onChange:e=>{this.setState({textValue:e})},onBlur:t=>{s(t,e)},onKeyDown:t=>{13===t.keyCode&&(s(t,e),t.preventDefault(),t.stopPropagation())},value:this.state.textValue},e.id):"ToggleControl"===e.type?(0,v.jsx)(i.ToggleControl,{className:"block-editor-link-control__setting",label:e.title,onChange:o(e),checked:!!t&&!!t[e.id]},e.id):null));return(0,v.jsxs)("fieldset",{className:"block-editor-link-control__settings",children:[(0,v.jsx)(i.VisuallyHidden,{as:"legend",children:(0,e.__)("Currently selected link settings")}),l]})}}const y=_;function x(e){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x(e)}function S(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==x(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,"string");if("object"!==x(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===x(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}const C=function(e){var n=e.icon,i=e.size,r=void 0===i?24:i,o=function(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}(e,["icon","size"]);return(0,t.cloneElement)(n,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){S(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({width:r,height:r},o))},N=(0,t.createElement)(a.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"-2 -2 24 24"},(0,t.createElement)(a.Path,{d:"M9 0C4.03 0 0 4.03 0 9s4.03 9 9 9 9-4.03 9-9-4.03-9-9-9zM1.11 9.68h2.51c.04.91.167 1.814.38 2.7H1.84c-.403-.85-.65-1.764-.73-2.7zm8.57-5.4V1.19c.964.366 1.756 1.08 2.22 2 .205.347.386.708.54 1.08l-2.76.01zm3.22 1.35c.232.883.37 1.788.41 2.7H9.68v-2.7h3.22zM8.32 1.19v3.09H5.56c.154-.372.335-.733.54-1.08.462-.924 1.255-1.64 2.22-2.01zm0 4.44v2.7H4.7c.04-.912.178-1.817.41-2.7h3.21zm-4.7 2.69H1.11c.08-.936.327-1.85.73-2.7H4c-.213.886-.34 1.79-.38 2.7zM4.7 9.68h3.62v2.7H5.11c-.232-.883-.37-1.788-.41-2.7zm3.63 4v3.09c-.964-.366-1.756-1.08-2.22-2-.205-.347-.386-.708-.54-1.08l2.76-.01zm1.35 3.09v-3.04h2.76c-.154.372-.335.733-.54 1.08-.464.92-1.256 1.634-2.22 2v-.04zm0-4.44v-2.7h3.62c-.04.912-.178 1.817-.41 2.7H9.68zm4.71-2.7h2.51c-.08.936-.327 1.85-.73 2.7H14c.21-.87.337-1.757.38-2.65l.01-.05zm0-1.35c-.046-.894-.176-1.78-.39-2.65h2.16c.403.85.65 1.764.73 2.7l-2.5-.05zm1-4H13.6c-.324-.91-.793-1.76-1.39-2.52 1.244.56 2.325 1.426 3.14 2.52h.04zm-9.6-2.52c-.597.76-1.066 1.61-1.39 2.52H2.65c.815-1.094 1.896-1.96 3.14-2.52zm-3.15 12H4.4c.324.91.793 1.76 1.39 2.52-1.248-.567-2.33-1.445-3.14-2.55l-.01.03zm9.56 2.52c.597-.76 1.066-1.61 1.39-2.52h1.76c-.82 1.08-1.9 1.933-3.14 2.48l-.01.04z"})),P=({itemProps:t,suggestion:n,isSelected:r=!1,onClick:s,isURL:l=!1,searchTerm:a=""})=>(0,v.jsxs)(i.Button,{...t,onClick:s,className:g()("block-editor-link-control__search-item",{"is-selected":r,"is-url":l,"is-entity":!l}),children:[l&&(0,v.jsx)(C,{className:"block-editor-link-control__search-item-icon",icon:N}),(0,v.jsxs)("span",{className:"block-editor-link-control__search-item-header",children:[(0,v.jsx)("span",{className:"block-editor-link-control__search-item-title",children:(0,v.jsx)(i.TextHighlight,{text:n.title,highlight:a})}),(0,v.jsxs)("span",{"aria-hidden":!l,className:"block-editor-link-control__search-item-info",children:[!l&&((0,o.safeDecodeURI)(n.url)||""),l&&(0,e.__)("Press ENTER to add this link")]})]}),n.type&&(0,v.jsx)("span",{className:"block-editor-link-control__search-item-type",children:n.type})]}),L=(0,t.createElement)(a.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"-2 -2 24 24"},(0,t.createElement)(a.Path,{d:"M16 4h2v9H7v3l-5-4 5-4v3h9V4z"})),T=window.wp,E=T.blockEditor?.URLInput||T.editor.URLInput,R=({value:n,onChange:r,onSelect:o,renderSuggestions:s,fetchSuggestions:l,showInitialSuggestions:a,errorMessage:c})=>{const[u,d]=(0,t.useState)();return(0,v.jsxs)("form",{onSubmit:function(e){e.preventDefault(),o(u||{url:n})},children:[(0,v.jsxs)("div",{className:"block-editor-link-control__search-input-wrapper",children:[(0,v.jsx)(E,{className:"block-editor-link-control__search-input",value:n,onChange:(e,t)=>{r(e),d(t)},placeholder:(0,e.__)("Search or type url"),__experimentalRenderSuggestions:s,__experimentalFetchLinkSuggestions:l,__experimentalHandleURLSuggestions:!0,__experimentalShowInitialSuggestions:a,onSubmit:()=>o(u||{url:n})}),(0,v.jsx)("div",{className:"block-editor-link-control__search-actions",children:(0,v.jsx)(i.Button,{type:"submit",label:(0,e.__)("Submit"),icon:L,className:"block-editor-link-control__search-submit"})})]}),c&&(0,v.jsx)(i.Notice,{className:"block-editor-link-control__search-error",status:"error",isDismissible:!1,children:c})]})},O=({searchTerm:n,onClick:r,itemProps:o,isSelected:s})=>n?(0,v.jsxs)(i.Button,{...o,className:g()("block-editor-link-control__search-create block-editor-link-control__search-item",{"is-selected":s}),onClick:r,children:[(0,v.jsx)(i.Icon,{className:"block-editor-link-control__search-item-icon",icon:"insert"}),(0,v.jsx)("span",{className:"block-editor-link-control__search-item-header",children:(0,v.jsx)("span",{className:"block-editor-link-control__search-item-title",children:(0,t.createInterpolateElement)((0,e.sprintf)((0,e.__)("New page: <mark>%1$s</mark>"),n),{mark:(0,v.jsx)("mark",{})})})})]}):null,{Slot:H,Fill:V}=(0,i.createSlotFill)("BlockEditorLinkControlViewer"),I="__CREATE__";function A({value:n,settings:r,selectedText:s,onChange:l=d.noop,showSuggestions:a=!0,showInitialSuggestions:c,forceIsEditingLink:u,createSuggestion:p}){const h=(0,t.useRef)(),b=(0,t.useRef)(),_=(0,t.useRef)(),x=(0,m.useInstanceId)(A),[S,j]=(0,t.useState)(n&&n.url||""),[C,N]=(0,t.useState)(void 0!==u?u:!n||!n.url),[L,T]=(0,t.useState)(!1),[E,V]=(0,t.useState)(null),F=(0,t.useRef)(!1),{fetchSearchSuggestions:z}=(0,k.useSelect)((e=>{const{getSettings:t}=e("core/block-editor");return{fetchSearchSuggestions:t().__experimentalFetchLinkSuggestions}}),[]),M=n&&(0,o.filterURLForDisplay)((0,o.safeDecodeURI)(n.url))||"";(0,t.useEffect)((()=>{void 0!==u&&u!==C&&N(u)}),[u]),(0,t.useEffect)((()=>{F.current&&_.current&&!_.current.contains(document.activeElement)&&(f.focus.focusable.find(_.current)[0]||_.current).focus(),F.current=!1}),[C]),(0,t.useEffect)((()=>()=>{h.current&&h.current.cancel(),b.current&&b.current.cancel()}),[]);const U=e=>{let t="URL";const n=(0,o.getProtocol)(e)||"";return n.includes("mailto")&&(t="mailto"),n.includes("tel")&&(t="tel"),(0,d.startsWith)(e,"#")&&(t="internal"),Promise.resolve([{id:e,title:e,url:"URL"===t?(0,o.prependHTTP)(e):e,type:t}])};function D(){F.current=!!_.current&&_.current.contains(document.activeElement),N(!1)}function B(e){const t=(0,d.startsWith)(e,"#");return(0,o.isURL)(e)||e&&e.includes("www.")||t}const W=(0,t.useCallback)(((e,t)=>a?B(e)?U(e):(async(e,t)=>{let n=await Promise.all([z(e,{...t.isInitialSuggestions?{perPage:3}:{}}),U(e)]);return n=e.includes(" ")||t.isInitialSuggestions?n[0]:n[0].concat(n[1]),B(e)?n:n.concat({title:e,url:e,type:I})})(e,t):Promise.resolve([])),[U,z]),$=async t=>{T(!0),V(null);try{b.current=(e=>{let t=!1;return{promise:new Promise(((n,i)=>{e.then((e=>t?i({isCanceled:!0}):n(e)),(e=>i(t?{isCanceled:!0}:e)))})),cancel(){t=!0}}})(Promise.resolve(p(t)));const e=await b.current.promise;T(!1),e?(l(e),D()):N(!0)}catch(t){if(t&&t.isCanceled)return;V(t.message||(0,e.__)("An unknown error occurred during creation. Please try again.")),T(!1),N(!0)}},G=(0,t.useMemo)((()=>({url:n&&n.url})),[n&&n.url]);return(0,v.jsxs)("div",{tabIndex:-1,ref:_,className:"block-editor-link-control aioseo-link-format",children:[L&&(0,v.jsxs)("div",{className:"block-editor-link-control__loading",children:[(0,v.jsx)(i.Spinner,{})," ",(0,e.__)("Creating"),"…"]}),(C||!n)&&!L&&(0,v.jsx)(R,{value:S,onChange:(e="")=>{j(e)},onSelect:async e=>{I===e.type?await $(S):(((e,t={})=>{N(!1),l({...t,...e}),(0,w.doAction)("aioseo-link-format-link-added",{...n,...e,title:null})})(e,n),D())},renderSuggestions:a?({suggestionsListProps:r,buildSuggestionItemProps:o,suggestions:a,selectedSuggestion:c,isLoading:u,isInitialSuggestions:d})=>{const h=g()("block-editor-link-control__search-results",{"is-loading":u}),m=["url","mailto","tel","internal"],k=1===a.length&&m.includes(a[0].type.toLowerCase()),f=p&&!k&&!d,b=`block-editor-link-control-search-results-label-${x}`,_=d?(0,e.__)("Recently updated"):(0,e.sprintf)((0,e.__)('Search results for "%1$s"'),S),y=(0,t.createElement)(d?t.Fragment:i.VisuallyHidden,{},(0,v.jsx)("span",{className:"block-editor-link-control__search-results-label",id:b,children:_}));return(0,v.jsxs)("div",{className:"block-editor-link-control__search-results-wrapper",children:[y,(0,v.jsx)("div",{...r,className:h,"aria-labelledby":b,children:a.map(((e,t)=>f&&I===e.type?(0,v.jsx)(O,{searchTerm:S,onClick:async()=>{await $(e.title)},itemProps:o(e,t),isSelected:t===c},e.type):I===e.type?null:(0,v.jsx)(P,{itemProps:o(e,t),suggestion:e,index:t,onClick:()=>{let t=e.title;isNaN(parseInt(e.id))&&(t=s),D(),l({...n,...e,title:t}),(0,w.doAction)("aioseo-link-format-link-added",{...n,...e,title:t})},isSelected:t===c,isURL:m.includes(e.type.toLowerCase()),searchTerm:S},`${e.id}-${e.type}`)))})]})}:null,fetchSuggestions:W,showInitialSuggestions:c,errorMessage:E}),n&&!C&&!L&&(0,v.jsx)(t.Fragment,{children:(0,v.jsxs)("div",{"aria-label":(0,e.__)("Currently selected"),"aria-selected":"true",className:g()("block-editor-link-control__search-item",{"is-current":!0}),children:[(0,v.jsxs)("span",{className:"block-editor-link-control__search-item-header",children:[(0,v.jsx)(i.ExternalLink,{className:"block-editor-link-control__search-item-title",href:n.url,children:n&&n.title||M}),n&&n.title&&(0,v.jsx)("span",{className:"block-editor-link-control__search-item-info",children:M})]}),(0,v.jsx)(i.Button,{isSecondary:!0,onClick:()=>N(!0),className:"block-editor-link-control__search-item-action",children:(0,e.__)("Edit")}),(0,v.jsx)(H,{fillProps:G})]})}),(0,v.jsx)(y,{value:n,settings:r,onChange:l,selectedText:s},"aioseop-settings-drawer"),(0,v.jsxs)("div",{id:"aioseo-link-assistant-education",children:[(0,v.jsx)("div",{id:"aioseo-link-assistant-education-mount"}),(0,v.jsx)("input",{type:"hidden",value:JSON.stringify(n)})]})]})}A.ViewerFill=V;const F=A,z=(0,i.withSpokenMessages)((function({isActive:n,activeAttributes:s,addingLink:l,value:a,onChange:c,speak:u,stopAddingLink:h}){const g=(0,t.useMemo)(d.uniqueId,[l]),[m,k]=(0,t.useState)(),f=a.text.substring(a.start,a.end),w=(0,t.useMemo)((()=>{const e=window.getSelection();if(!e.rangeCount)return;const t=e.getRangeAt(0);if(l&&!n)return t;let i=t.startContainer;for(i=i.nextElementSibling||i;i.nodeType!==window.Node.ELEMENT_NODE;)i=i.parentNode;return i.closest("a")}),[l,a.start,a.end]),b={url:s.url,opensInNewTab:"_blank"===s.target,nofollow:!!s.rel&&s.rel.includes("nofollow"),sponsored:!!s.rel&&s.rel.includes("sponsored"),ugc:!!s.rel&&s.rel.includes("ugc"),title:s.title||"",isAddingLink:!s.url,...m};return(0,v.jsx)(i.Popover,{anchor:p(window.aioseo.wpVersion,"6.1",">=")?w:void 0,anchorRef:p(window.aioseo.wpVersion,"6.1","<")?w:void 0,focusOnMount:!!l&&"firstElement",onClose:h,children:(0,v.jsx)(F,{value:b,onChange:function(t){t={...m,...t};const i=(b.opensInNewTab!==t.opensInNewTab||b.sponsored!==t.sponsored||b.nofollow!==t.nofollow||b.ugc!==t.ugc)&&b.url===t.url,s=i&&void 0===t.url;if(k(s?t:void 0),s)return;const l=(0,o.prependHTTP)(t.url),p=function({url:e,opensInNewWindow:t,nofollow:n,sponsored:i,ugc:r,title:o}){const s={type:"core/link",attributes:{url:e}},l=[];return t&&(s.attributes.target="_blank",l.push("noopener")),n&&l.push("nofollow"),i&&l.push("sponsored"),r&&l.push("ugc"),0<l.length&&(s.attributes.rel=l.join(" ")),void 0!==o&&(s.attributes.title=o),s}({url:l,opensInNewWindow:t.opensInNewTab,nofollow:t.nofollow,sponsored:t.sponsored,ugc:t.ugc,title:t.title});if((0,r.isCollapsed)(a)&&!n){const e=t.title||l,n=(0,r.applyFormat)((0,r.create)({text:e}),p,0,e.length);c((0,r.insert)(a,n))}else c((0,r.applyFormat)(a,p));i||h(),function(e){if(!e)return!1;const t=e.trim();if(!t)return!1;if(/^\S+:/.test(t)){const e=(0,o.getProtocol)(t);if(!(0,o.isValidProtocol)(e))return!1;if((0,d.startsWith)(e,"http")&&!/^https?:\/\/[^/\s]/i.test(t))return!1;const n=(0,o.getAuthority)(t);if(!(0,o.isValidAuthority)(n))return!1;const i=(0,o.getPath)(t);if(i&&!(0,o.isValidPath)(i))return!1;const r=(0,o.getQueryString)(t);if(r&&!(0,o.isValidQueryString)(r))return!1;const s=(0,o.getFragment)(t);if(s&&!(0,o.isValidFragment)(s))return!1}return!((0,d.startsWith)(t,"#")&&!(0,o.isValidFragment)(t))}(l)?u(n?(0,e.__)("Link edited.","all-in-one-seo-pack"):(0,e.__)("Link inserted.","all-in-one-seo-pack"),"assertive"):u((0,e.__)("Warning: the link has been inserted but may have errors. Please test it.","all-in-one-seo-pack"),"assertive")},forceIsEditingLink:l,selectedText:f})},g)})),M="core/link",U=(0,e.__)("Link","all-in-one-seo-pack"),D={name:M,title:U,tagName:"a",className:null,attributes:{url:"href",target:"target",rel:"rel",title:"title"},__unstablePasteRule(e,{html:t,plainText:n}){if((0,r.isCollapsed)(e))return e;const i=(t||n).replace(/<[^>]+>/g,"").trim();return(0,o.isURL)(i)?(0,r.applyFormat)(e,{type:M,attributes:{url:(0,l.decodeEntities)(i)}}):e},edit:(0,i.withSpokenMessages)(class extends t.Component{constructor(){super(...arguments),this.addLink=this.addLink.bind(this),this.stopAddingLink=this.stopAddingLink.bind(this),this.onRemoveFormat=this.onRemoveFormat.bind(this),this.state={addingLink:!1}}addLink(){const{value:e,onChange:t}=this.props,n=(0,r.getTextContent)((0,r.slice)(e));n&&(0,o.isURL)(n)?t((0,r.applyFormat)(e,{type:M,attributes:{url:n}})):n&&(0,o.isEmail)(n)?t((0,r.applyFormat)(e,{type:M,attributes:{url:`mailto:${n}`}})):this.setState({addingLink:!0})}stopAddingLink(){this.setState({addingLink:!1}),this.props.onFocus()}onRemoveFormat(){const{value:t,onChange:n,speak:i}=this.props;n((0,r.removeFormat)(t,M)),i((0,e.__)("Link removed.","all-in-one-seo-pack"),"assertive")}render(){const{isActive:n,activeAttributes:i,value:r,onChange:o}=this.props;return(0,v.jsxs)(t.Fragment,{children:[(0,v.jsx)(s.RichTextShortcut,{type:"primary",character:"k",onUse:this.addLink}),(0,v.jsx)(s.RichTextShortcut,{type:"primaryShift",character:"k",onUse:this.onRemoveFormat}),n&&(0,v.jsx)(s.RichTextToolbarButton,{name:"link",icon:c,title:(0,e.__)("Unlink","all-in-one-seo-pack"),onClick:this.onRemoveFormat,isActive:n,shortcutType:"primaryShift",shortcutCharacter:"k"}),!n&&(0,v.jsx)(s.RichTextToolbarButton,{name:"link",icon:u,title:U,onClick:this.addLink,isActive:n,shortcutType:"primary",shortcutCharacter:"k"}),(this.state.addingLink||n)&&(0,v.jsx)(z,{addingLink:this.state.addingLink,stopAddingLink:this.stopAddingLink,isActive:n,activeAttributes:i,value:r,onChange:o},"aioseop-inline-link-ui")]})}})},{registerFormatType:B,unregisterFormatType:W}=wp.richText;[D].forEach((({name:e,...t})=>{e&&(W("core/link"),B(e,t))}))})()})();